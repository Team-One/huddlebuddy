if (typeof global.__coverage__ === 'undefined') { global.__coverage__ = {}; }
if (!global.__coverage__['/Users/matteo/Repositories/ascoltatori/lib/zeromq_ascoltatore.js']) {
   global.__coverage__['/Users/matteo/Repositories/ascoltatori/lib/zeromq_ascoltatore.js'] = {"path":"/Users/matteo/Repositories/ascoltatori/lib/zeromq_ascoltatore.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"fnMap":{"1":{"name":"ZeromqAscoltatore","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":33}}},"2":{"name":"createConn","line":56,"loc":{"start":{"line":56,"column":0},"end":{"line":56,"column":32}}},"3":{"name":"(anonymous_3)","line":69,"loc":{"start":{"line":69,"column":41},"end":{"line":69,"column":52}}},"4":{"name":"(anonymous_4)","line":74,"loc":{"start":{"line":74,"column":35},"end":{"line":74,"column":50}}},"5":{"name":"(anonymous_5)","line":81,"loc":{"start":{"line":81,"column":40},"end":{"line":81,"column":51}}},"6":{"name":"(anonymous_6)","line":86,"loc":{"start":{"line":86,"column":41},"end":{"line":86,"column":55}}},"7":{"name":"(anonymous_7)","line":93,"loc":{"start":{"line":93,"column":17},"end":{"line":93,"column":28}}},"8":{"name":"(anonymous_8)","line":94,"loc":{"start":{"line":94,"column":42},"end":{"line":94,"column":53}}},"9":{"name":"(anonymous_9)","line":103,"loc":{"start":{"line":103,"column":44},"end":{"line":103,"column":55}}},"10":{"name":"(anonymous_10)","line":108,"loc":{"start":{"line":108,"column":52},"end":{"line":108,"column":66}}},"11":{"name":"(anonymous_11)","line":115,"loc":{"start":{"line":115,"column":48},"end":{"line":115,"column":59}}},"12":{"name":"(anonymous_12)","line":116,"loc":{"start":{"line":116,"column":41},"end":{"line":116,"column":53}}},"13":{"name":"(anonymous_13)","line":123,"loc":{"start":{"line":123,"column":39},"end":{"line":123,"column":54}}},"14":{"name":"connect","line":139,"loc":{"start":{"line":139,"column":38},"end":{"line":139,"column":71}}},"15":{"name":"(anonymous_15)","line":149,"loc":{"start":{"line":149,"column":21},"end":{"line":149,"column":36}}},"16":{"name":"(anonymous_16)","line":153,"loc":{"start":{"line":153,"column":47},"end":{"line":153,"column":62}}},"17":{"name":"(anonymous_17)","line":155,"loc":{"start":{"line":155,"column":30},"end":{"line":155,"column":45}}},"18":{"name":"(anonymous_18)","line":161,"loc":{"start":{"line":161,"column":11},"end":{"line":161,"column":26}}},"19":{"name":"(anonymous_19)","line":162,"loc":{"start":{"line":162,"column":13},"end":{"line":162,"column":26}}},"20":{"name":"(anonymous_20)","line":167,"loc":{"start":{"line":167,"column":26},"end":{"line":167,"column":37}}},"21":{"name":"(anonymous_21)","line":168,"loc":{"start":{"line":168,"column":17},"end":{"line":168,"column":28}}},"22":{"name":"(anonymous_22)","line":182,"loc":{"start":{"line":182,"column":42},"end":{"line":182,"column":67}}},"23":{"name":"(anonymous_23)","line":194,"loc":{"start":{"line":194,"column":21},"end":{"line":194,"column":36}}},"24":{"name":"(anonymous_24)","line":207,"loc":{"start":{"line":207,"column":13},"end":{"line":207,"column":24}}},"25":{"name":"subscribe","line":220,"loc":{"start":{"line":220,"column":40},"end":{"line":220,"column":82}}},"26":{"name":"publish","line":226,"loc":{"start":{"line":226,"column":38},"end":{"line":226,"column":77}}},"27":{"name":"unsubscribe","line":236,"loc":{"start":{"line":236,"column":42},"end":{"line":236,"column":86}}},"28":{"name":"close","line":243,"loc":{"start":{"line":243,"column":36},"end":{"line":243,"column":57}}},"29":{"name":"(anonymous_29)","line":252,"loc":{"start":{"line":252,"column":28},"end":{"line":252,"column":40}}},"30":{"name":"(anonymous_30)","line":258,"loc":{"start":{"line":258,"column":34},"end":{"line":258,"column":46}}},"31":{"name":"(anonymous_31)","line":273,"loc":{"start":{"line":273,"column":13},"end":{"line":273,"column":24}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":52}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":60}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":48}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":29}},"8":{"start":{"line":29,"column":0},"end":{"line":42,"column":1}},"9":{"start":{"line":30,"column":2},"end":{"line":30,"column":33}},"10":{"start":{"line":32,"column":2},"end":{"line":32,"column":26}},"11":{"start":{"line":33,"column":2},"end":{"line":33,"column":43}},"12":{"start":{"line":34,"column":2},"end":{"line":34,"column":52}},"13":{"start":{"line":36,"column":2},"end":{"line":36,"column":44}},"14":{"start":{"line":37,"column":2},"end":{"line":37,"column":20}},"15":{"start":{"line":38,"column":2},"end":{"line":38,"column":19}},"16":{"start":{"line":39,"column":2},"end":{"line":39,"column":23}},"17":{"start":{"line":41,"column":2},"end":{"line":41,"column":31}},"18":{"start":{"line":49,"column":0},"end":{"line":49,"column":75}},"19":{"start":{"line":56,"column":0},"end":{"line":62,"column":1}},"20":{"start":{"line":57,"column":2},"end":{"line":57,"column":35}},"21":{"start":{"line":58,"column":2},"end":{"line":58,"column":41}},"22":{"start":{"line":60,"column":2},"end":{"line":60,"column":43}},"23":{"start":{"line":61,"column":2},"end":{"line":61,"column":14}},"24":{"start":{"line":69,"column":0},"end":{"line":79,"column":2}},"25":{"start":{"line":70,"column":2},"end":{"line":70,"column":18}},"26":{"start":{"line":71,"column":2},"end":{"line":77,"column":3}},"27":{"start":{"line":72,"column":4},"end":{"line":72,"column":25}},"28":{"start":{"line":73,"column":4},"end":{"line":73,"column":58}},"29":{"start":{"line":74,"column":4},"end":{"line":76,"column":7}},"30":{"start":{"line":75,"column":6},"end":{"line":75,"column":25}},"31":{"start":{"line":78,"column":2},"end":{"line":78,"column":25}},"32":{"start":{"line":81,"column":0},"end":{"line":101,"column":2}},"33":{"start":{"line":82,"column":2},"end":{"line":82,"column":18}},"34":{"start":{"line":83,"column":2},"end":{"line":99,"column":3}},"35":{"start":{"line":84,"column":4},"end":{"line":84,"column":51}},"36":{"start":{"line":85,"column":4},"end":{"line":85,"column":49}},"37":{"start":{"line":86,"column":4},"end":{"line":98,"column":7}},"38":{"start":{"line":87,"column":6},"end":{"line":89,"column":7}},"39":{"start":{"line":88,"column":8},"end":{"line":88,"column":18}},"40":{"start":{"line":91,"column":6},"end":{"line":91,"column":71}},"41":{"start":{"line":93,"column":6},"end":{"line":97,"column":27}},"42":{"start":{"line":94,"column":8},"end":{"line":96,"column":11}},"43":{"start":{"line":95,"column":10},"end":{"line":95,"column":29}},"44":{"start":{"line":100,"column":2},"end":{"line":100,"column":24}},"45":{"start":{"line":103,"column":0},"end":{"line":129,"column":2}},"46":{"start":{"line":104,"column":2},"end":{"line":104,"column":18}},"47":{"start":{"line":105,"column":2},"end":{"line":128,"column":3}},"48":{"start":{"line":106,"column":4},"end":{"line":106,"column":55}},"49":{"start":{"line":107,"column":4},"end":{"line":107,"column":60}},"50":{"start":{"line":108,"column":4},"end":{"line":127,"column":7}},"51":{"start":{"line":109,"column":6},"end":{"line":111,"column":7}},"52":{"start":{"line":110,"column":8},"end":{"line":110,"column":18}},"53":{"start":{"line":113,"column":6},"end":{"line":113,"column":78}},"54":{"start":{"line":115,"column":6},"end":{"line":121,"column":14}},"55":{"start":{"line":116,"column":8},"end":{"line":118,"column":21}},"56":{"start":{"line":117,"column":10},"end":{"line":117,"column":24}},"57":{"start":{"line":119,"column":8},"end":{"line":119,"column":50}},"58":{"start":{"line":120,"column":8},"end":{"line":120,"column":40}},"59":{"start":{"line":123,"column":6},"end":{"line":126,"column":9}},"60":{"start":{"line":124,"column":8},"end":{"line":124,"column":56}},"61":{"start":{"line":125,"column":8},"end":{"line":125,"column":31}},"62":{"start":{"line":139,"column":0},"end":{"line":173,"column":2}},"63":{"start":{"line":140,"column":2},"end":{"line":141,"column":16}},"64":{"start":{"line":143,"column":2},"end":{"line":143,"column":39}},"65":{"start":{"line":145,"column":2},"end":{"line":145,"column":21}},"66":{"start":{"line":147,"column":2},"end":{"line":147,"column":37}},"67":{"start":{"line":149,"column":2},"end":{"line":172,"column":5}},"68":{"start":{"line":150,"column":4},"end":{"line":150,"column":51}},"69":{"start":{"line":151,"column":4},"end":{"line":151,"column":31}},"70":{"start":{"line":153,"column":4},"end":{"line":165,"column":7}},"71":{"start":{"line":154,"column":6},"end":{"line":154,"column":23}},"72":{"start":{"line":155,"column":6},"end":{"line":159,"column":9}},"73":{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},"74":{"start":{"line":157,"column":10},"end":{"line":157,"column":24}},"75":{"start":{"line":160,"column":6},"end":{"line":160,"column":19}},"76":{"start":{"line":162,"column":6},"end":{"line":164,"column":8}},"77":{"start":{"line":163,"column":8},"end":{"line":163,"column":35}},"78":{"start":{"line":167,"column":4},"end":{"line":171,"column":7}},"79":{"start":{"line":168,"column":6},"end":{"line":170,"column":27}},"80":{"start":{"line":169,"column":8},"end":{"line":169,"column":25}},"81":{"start":{"line":182,"column":0},"end":{"line":213,"column":2}},"82":{"start":{"line":183,"column":2},"end":{"line":184,"column":41}},"83":{"start":{"line":186,"column":2},"end":{"line":186,"column":22}},"84":{"start":{"line":188,"column":2},"end":{"line":188,"column":38}},"85":{"start":{"line":189,"column":2},"end":{"line":189,"column":19}},"86":{"start":{"line":190,"column":2},"end":{"line":190,"column":21}},"87":{"start":{"line":191,"column":2},"end":{"line":191,"column":21}},"88":{"start":{"line":192,"column":2},"end":{"line":192,"column":29}},"89":{"start":{"line":194,"column":2},"end":{"line":205,"column":5}},"90":{"start":{"line":195,"column":4},"end":{"line":195,"column":27}},"91":{"start":{"line":196,"column":4},"end":{"line":197,"column":21}},"92":{"start":{"line":199,"column":4},"end":{"line":199,"column":46}},"93":{"start":{"line":200,"column":4},"end":{"line":200,"column":49}},"94":{"start":{"line":202,"column":4},"end":{"line":202,"column":46}},"95":{"start":{"line":204,"column":4},"end":{"line":204,"column":53}},"96":{"start":{"line":207,"column":2},"end":{"line":210,"column":23}},"97":{"start":{"line":208,"column":4},"end":{"line":208,"column":49}},"98":{"start":{"line":209,"column":4},"end":{"line":209,"column":25}},"99":{"start":{"line":212,"column":2},"end":{"line":212,"column":14}},"100":{"start":{"line":220,"column":0},"end":{"line":224,"column":2}},"101":{"start":{"line":221,"column":2},"end":{"line":221,"column":24}},"102":{"start":{"line":222,"column":2},"end":{"line":222,"column":56}},"103":{"start":{"line":223,"column":2},"end":{"line":223,"column":53}},"104":{"start":{"line":226,"column":0},"end":{"line":234,"column":2}},"105":{"start":{"line":227,"column":2},"end":{"line":227,"column":24}},"106":{"start":{"line":229,"column":2},"end":{"line":229,"column":37}},"107":{"start":{"line":231,"column":2},"end":{"line":231,"column":30}},"108":{"start":{"line":232,"column":2},"end":{"line":232,"column":45}},"109":{"start":{"line":233,"column":2},"end":{"line":233,"column":19}},"110":{"start":{"line":236,"column":0},"end":{"line":241,"column":2}},"111":{"start":{"line":237,"column":2},"end":{"line":237,"column":24}},"112":{"start":{"line":238,"column":2},"end":{"line":238,"column":54}},"113":{"start":{"line":239,"column":2},"end":{"line":239,"column":49}},"114":{"start":{"line":240,"column":2},"end":{"line":240,"column":19}},"115":{"start":{"line":243,"column":0},"end":{"line":279,"column":2}},"116":{"start":{"line":244,"column":2},"end":{"line":244,"column":18}},"117":{"start":{"line":246,"column":2},"end":{"line":249,"column":3}},"118":{"start":{"line":247,"column":4},"end":{"line":247,"column":21}},"119":{"start":{"line":248,"column":4},"end":{"line":248,"column":11}},"120":{"start":{"line":251,"column":2},"end":{"line":256,"column":3}},"121":{"start":{"line":252,"column":4},"end":{"line":254,"column":7}},"122":{"start":{"line":253,"column":6},"end":{"line":253,"column":16}},"123":{"start":{"line":255,"column":4},"end":{"line":255,"column":27}},"124":{"start":{"line":258,"column":2},"end":{"line":260,"column":5}},"125":{"start":{"line":259,"column":4},"end":{"line":259,"column":14}},"126":{"start":{"line":262,"column":2},"end":{"line":265,"column":3}},"127":{"start":{"line":263,"column":4},"end":{"line":263,"column":27}},"128":{"start":{"line":264,"column":4},"end":{"line":264,"column":26}},"129":{"start":{"line":267,"column":2},"end":{"line":271,"column":3}},"130":{"start":{"line":268,"column":4},"end":{"line":268,"column":31}},"131":{"start":{"line":269,"column":4},"end":{"line":269,"column":47}},"132":{"start":{"line":270,"column":4},"end":{"line":270,"column":39}},"133":{"start":{"line":273,"column":2},"end":{"line":278,"column":23}},"134":{"start":{"line":274,"column":4},"end":{"line":274,"column":20}},"135":{"start":{"line":275,"column":4},"end":{"line":275,"column":30}},"136":{"start":{"line":276,"column":4},"end":{"line":276,"column":24}},"137":{"start":{"line":277,"column":4},"end":{"line":277,"column":21}},"138":{"start":{"line":281,"column":0},"end":{"line":281,"column":51}},"139":{"start":{"line":288,"column":0},"end":{"line":288,"column":35}}},"branchMap":{"1":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":15},"end":{"line":32,"column":19}},{"start":{"line":32,"column":23},"end":{"line":32,"column":25}}]},"2":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":21},"end":{"line":33,"column":37}},{"start":{"line":33,"column":41},"end":{"line":33,"column":42}}]},"3":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":19},"end":{"line":34,"column":33}},{"start":{"line":34,"column":37},"end":{"line":34,"column":51}}]},"4":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":2},"end":{"line":71,"column":2}},{"start":{"line":71,"column":2},"end":{"line":71,"column":2}}]},"5":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":29},"end":{"line":73,"column":51}},{"start":{"line":73,"column":55},"end":{"line":73,"column":57}}]},"6":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":2},"end":{"line":83,"column":2}},{"start":{"line":83,"column":2},"end":{"line":83,"column":2}}]},"7":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":6},"end":{"line":87,"column":6}},{"start":{"line":87,"column":6},"end":{"line":87,"column":6}}]},"8":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":2},"end":{"line":105,"column":2}},{"start":{"line":105,"column":2},"end":{"line":105,"column":2}}]},"9":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":6},"end":{"line":109,"column":6}},{"start":{"line":109,"column":6},"end":{"line":109,"column":6}}]},"10":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":8},"end":{"line":156,"column":8}},{"start":{"line":156,"column":8},"end":{"line":156,"column":8}}]},"11":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":2},"end":{"line":246,"column":2}},{"start":{"line":246,"column":2},"end":{"line":246,"column":2}}]},"12":{"line":251,"type":"if","locations":[{"start":{"line":251,"column":2},"end":{"line":251,"column":2}},{"start":{"line":251,"column":2},"end":{"line":251,"column":2}}]},"13":{"line":262,"type":"if","locations":[{"start":{"line":262,"column":2},"end":{"line":262,"column":2}},{"start":{"line":262,"column":2},"end":{"line":262,"column":2}}]},"14":{"line":267,"type":"if","locations":[{"start":{"line":267,"column":2},"end":{"line":267,"column":2}},{"start":{"line":267,"column":2},"end":{"line":267,"column":2}}]},"15":{"line":267,"type":"binary-expr","locations":[{"start":{"line":267,"column":6},"end":{"line":267,"column":38}},{"start":{"line":267,"column":42},"end":{"line":267,"column":77}}]}}};
}
var __cov_gJbrdqn2LgJtN$U1xxa1sw = global.__coverage__['/Users/matteo/Repositories/ascoltatori/lib/zeromq_ascoltatore.js'];
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['1']++;
'use strict';
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['2']++;
var util = require('./util');
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['3']++;
var wrap = util.wrap;
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['4']++;
var TrieAscoltatore = require('./trie_ascoltatore');
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['5']++;
var AbstractAscoltatore = require('./abstract_ascoltatore');
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['6']++;
var debug = require('debug')('ascoltatori:zmq');
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['7']++;
var async = require('async');
function ZeromqAscoltatore(opts) {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['1']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['9']++;
    AbstractAscoltatore.call(this);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['10']++;
    this._opts = (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['1'][0]++, opts) || (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['1'][1]++, {});
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['11']++;
    this._opts.delay = (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['2'][0]++, this._opts.delay) || (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['2'][1]++, 5);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['12']++;
    this._opts.zmq = (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['3'][0]++, this._opts.zmq) || (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['3'][1]++, require('zmq'));
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['13']++;
    this._ascoltatore = new TrieAscoltatore();
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['14']++;
    this._startSubs();
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['15']++;
    this._startPub();
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['16']++;
    this._startControl();
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['17']++;
    this._connectedControls = [];
}
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['18']++;
ZeromqAscoltatore.prototype = Object.create(AbstractAscoltatore.prototype);
function createConn(opts, type) {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['2']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['20']++;
    var conn = opts.zmq.socket(type);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['21']++;
    conn.identity = util.buildIdentifier();
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['22']++;
    debug('created ' + type + ' connection');
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['23']++;
    return conn;
}
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['24']++;
ZeromqAscoltatore.prototype._startSubs = function () {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['3']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['25']++;
    var that = this;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['26']++;
    if (this._sub_conns === undefined) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['4'][0]++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['27']++;
        that._sub_conns = [];
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['28']++;
        that._opts.remotePorts = (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['5'][0]++, that._opts.remotePorts) || (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['5'][1]++, []);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['29']++;
        that._opts.remotePorts.forEach(function (port) {
            __cov_gJbrdqn2LgJtN$U1xxa1sw.f['4']++;
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['30']++;
            that.connect(port);
        });
    } else {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['4'][1]++;
    }
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['31']++;
    return this._sub_conns;
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['32']++;
ZeromqAscoltatore.prototype._startPub = function () {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['5']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['33']++;
    var that = this;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['34']++;
    if (that._pub_conn === undefined) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['6'][0]++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['35']++;
        that._pub_conn = createConn(that._opts, 'pub');
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['36']++;
        debug('opening pub port ' + that._opts.port);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['37']++;
        that._pub_conn.bind(that._opts.port, function (err) {
            __cov_gJbrdqn2LgJtN$U1xxa1sw.f['6']++;
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['38']++;
            if (err) {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.b['7'][0]++;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['39']++;
                throw err;
            } else {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.b['7'][1]++;
            }
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['40']++;
            debug('bound the publish connection to port ' + that._opts.port);
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['41']++;
            setTimeout(function () {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.f['7']++;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['42']++;
                that._connectSub(that._opts.port, function () {
                    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['8']++;
                    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['43']++;
                    that.emit('ready');
                });
            }, that._opts.delay);
        });
    } else {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['6'][1]++;
    }
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['44']++;
    return that._pub_conn;
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['45']++;
ZeromqAscoltatore.prototype._startControl = function () {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['9']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['46']++;
    var that = this;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['47']++;
    if (that._control_conn === undefined) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['8'][0]++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['48']++;
        that._control_conn = createConn(that._opts, 'req');
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['49']++;
        debug('opening control port ' + that._opts.controlPort);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['50']++;
        that._control_conn.bind(that._opts.controlPort, function (err) {
            __cov_gJbrdqn2LgJtN$U1xxa1sw.f['10']++;
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['51']++;
            if (err) {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.b['9'][0]++;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['52']++;
                throw err;
            } else {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.b['9'][1]++;
            }
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['53']++;
            debug('bound the control connection to port ' + that._opts.controlPort);
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['54']++;
            that._control_conn_interval = setInterval(function () {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.f['11']++;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['55']++;
                var packet = that._sub_conns.map(function (c) {
                        __cov_gJbrdqn2LgJtN$U1xxa1sw.f['12']++;
                        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['56']++;
                        return c.port;
                    }).join(',');
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['57']++;
                debug('sending control packet ' + packet);
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['58']++;
                that._control_conn.send(packet);
            }, 250);
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['59']++;
            that._control_conn.on('message', function (data) {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.f['13']++;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['60']++;
                debug('received connect response from ' + data);
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['61']++;
                that._connectSub(data);
            });
        });
    } else {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['8'][1]++;
    }
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['62']++;
ZeromqAscoltatore.prototype.connect = function connect(port, callback) {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['14']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['63']++;
    var that = this, conn = null;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['64']++;
    conn = createConn(that._opts, 'rep');
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['65']++;
    conn.connect(port);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['66']++;
    that._connectedControls.push(conn);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['67']++;
    conn.on('message', function (data) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.f['15']++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['68']++;
        debug('received connect request from ' + data);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['69']++;
        conn.send(that._opts.port);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['70']++;
        var dests = String(data).split(',').filter(function (dest) {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.f['16']++;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['71']++;
                var found = true;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['72']++;
                that._sub_conns.forEach(function (conn) {
                    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['17']++;
                    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['73']++;
                    if (conn.port === dest) {
                        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['10'][0]++;
                        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['74']++;
                        found = false;
                    } else {
                        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['10'][1]++;
                    }
                });
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['75']++;
                return found;
            }).map(function (dest) {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.f['18']++;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['76']++;
                return function (cb) {
                    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['19']++;
                    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['77']++;
                    that._connectSub(dest, cb);
                };
            });
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['78']++;
        async.parallel(dests, function () {
            __cov_gJbrdqn2LgJtN$U1xxa1sw.f['20']++;
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['79']++;
            setTimeout(function () {
                __cov_gJbrdqn2LgJtN$U1xxa1sw.f['21']++;
                __cov_gJbrdqn2LgJtN$U1xxa1sw.s['80']++;
                wrap(callback)();
            }, that._opts.delay);
        });
    });
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['81']++;
ZeromqAscoltatore.prototype._connectSub = function (port, callback) {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['22']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['82']++;
    var that = this, conn = createConn(that._opts, 'sub');
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['83']++;
    port = String(port);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['84']++;
    debug('connecting to port ' + port);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['85']++;
    conn.port = port;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['86']++;
    conn.connect(port);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['87']++;
    conn.subscribe('');
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['88']++;
    that._sub_conns.push(conn);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['89']++;
    conn.on('message', function (data) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.f['23']++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['90']++;
        data = data.toString();
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['91']++;
        var topic = null, message = null;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['92']++;
        topic = data.substr(0, data.indexOf(' '));
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['93']++;
        message = data.substr(data.indexOf(' ') + 1);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['94']++;
        that._ascoltatore.publish(topic, message);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['95']++;
        debug('new message received for topic ' + topic);
    });
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['96']++;
    setTimeout(function () {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.f['24']++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['97']++;
        debug('connected and subscribed to ' + port);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['98']++;
        util.defer(callback);
    }, this._opts.delay);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['99']++;
    return this;
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['100']++;
ZeromqAscoltatore.prototype.subscribe = function subscribe(topic, callback, done) {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['25']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['101']++;
    this._raiseIfClosed();
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['102']++;
    debug('registered new subscriber for topic ' + topic);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['103']++;
    this._ascoltatore.subscribe(topic, callback, done);
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['104']++;
ZeromqAscoltatore.prototype.publish = function publish(topic, message, done) {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['26']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['105']++;
    this._raiseIfClosed();
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['106']++;
    var toSend = topic + ' ' + message;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['107']++;
    this._pub_conn.send(toSend);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['108']++;
    debug('new message published to ' + topic);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['109']++;
    util.defer(done);
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['110']++;
ZeromqAscoltatore.prototype.unsubscribe = function unsubscribe(topic, callback, done) {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['27']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['111']++;
    this._raiseIfClosed();
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['112']++;
    debug('deregistered subscriber for topic ' + topic);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['113']++;
    this._ascoltatore.unsubscribe(topic, callback);
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['114']++;
    util.defer(done);
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['115']++;
ZeromqAscoltatore.prototype.close = function close(done) {
    __cov_gJbrdqn2LgJtN$U1xxa1sw.f['28']++;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['116']++;
    var that = this;
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['117']++;
    if (this._closed) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['11'][0]++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['118']++;
        util.defer(done);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['119']++;
        return;
    } else {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['11'][1]++;
    }
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['120']++;
    if (that._sub_conns !== undefined) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['12'][0]++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['121']++;
        that._sub_conns.forEach(function (s) {
            __cov_gJbrdqn2LgJtN$U1xxa1sw.f['29']++;
            __cov_gJbrdqn2LgJtN$U1xxa1sw.s['122']++;
            s.close();
        });
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['123']++;
        delete that._sub_conns;
    } else {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['12'][1]++;
    }
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['124']++;
    that._connectedControls.forEach(function (s) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.f['30']++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['125']++;
        s.close();
    });
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['126']++;
    if (that._pub_conn !== undefined) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['13'][0]++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['127']++;
        that._pub_conn.close();
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['128']++;
        delete that._pub_conn;
    } else {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['13'][1]++;
    }
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['129']++;
    if ((__cov_gJbrdqn2LgJtN$U1xxa1sw.b['15'][0]++, that._control_conn !== undefined) && (__cov_gJbrdqn2LgJtN$U1xxa1sw.b['15'][1]++, that._control_conn._zmq.state === 0)) {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['14'][0]++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['130']++;
        that._control_conn.close();
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['131']++;
        clearInterval(that._control_conn_interval);
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['132']++;
        delete that._control_conn_interval;
    } else {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.b['14'][1]++;
    }
    __cov_gJbrdqn2LgJtN$U1xxa1sw.s['133']++;
    setTimeout(function () {
        __cov_gJbrdqn2LgJtN$U1xxa1sw.f['31']++;
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['134']++;
        debug('closed');
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['135']++;
        that._ascoltatore.close();
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['136']++;
        that.emit('closed');
        __cov_gJbrdqn2LgJtN$U1xxa1sw.s['137']++;
        util.defer(done);
    }, this._opts.delay);
};
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['138']++;
util.aliasAscoltatore(ZeromqAscoltatore.prototype);
__cov_gJbrdqn2LgJtN$U1xxa1sw.s['139']++;
module.exports = ZeromqAscoltatore;
